<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <link crossorigin="anonymous" media="all"
        rel="stylesheet"
        href="https://pinkguy233.github.io/css/frameworks.css" />
    <link crossorigin="anonymous" media="all"
        rel="stylesheet" href="https://pinkguy233.github.io/css/github.css" />
    <meta name="viewport" content="width=device-width">

    <title>序列 - PinkGuy主页</title>

    <link rel="icon" type="image/x-icon" class="js-site-favicon" href="https://pinkguy233.github.io/images/favicon.ico">
    <meta name="theme-color" content="#1e2327">
    
</head>

<body class="env-production emoji-size-boost page-responsive page-profile">
  <div class="position-relative js-header-wrapper ">
    <span class="Progress progress-pjax-loader position-fixed width-full js-pjax-loader-bar">
        <span class="progress-pjax-loader-bar top-0 left-0" style="width: 0%;"></span>
    </span>
    <header class="Header js-details-container Details flex-wrap flex-lg-nowrap p-responsive" role="banner">
        <div class="Header-item d-none d-lg-flex">
            <a class="Header-link" href="https://pinkguy233.github.io/" aria-label="Homepage"
                data-ga-click="Header, go to dashboard, icon:logo">
                <svg class="octicon octicon-mark-github v-align-middle" height="32" viewBox="0 0 16 16" version="1.1"
                    width="32" aria-hidden="true">
                    <path fill-rule="evenodd"
                        d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z" />
                </svg>
            </a>
        </div>
        <div
            class="Header-item Header-item--full flex-column flex-lg-row width-full flex-order-2 flex-lg-order-none mr-0 mr-lg-3 mt-3 mt-lg-0 Details-content--hidden">
            <div class="header-search flex-self-stretch flex-lg-self-auto mr-0 mr-lg-3 mb-3 mb-lg-0 scoped-search site-scoped-search js-site-search position-relative js-jump-to"
                role="combobox" aria-owns="jump-to-results" aria-label="Search or jump to" aria-haspopup="listbox"
                aria-expanded="false">
                <div class="position-relative">
                </div>
            </div>
        </div>
        <div class="Header-item Header-item--full flex-justify-center d-lg-none position-relative" style="margin-right: auto;">
            <a class="Header-link" href="https://pinkguy233.github.io/" aria-label="Homepage"
                data-ga-click="Header, go to dashboard, icon:logo">
                <svg class="octicon octicon-mark-github v-align-middle" height="32" viewBox="0 0 16 16" version="1.1"
                    width="32" aria-hidden="true">
                    <path fill-rule="evenodd"
                        d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z" />
                </svg>
            </a>
        </div>
        <div class="Header-item position-relative mr-0 d-none d-lg-flex">
            <details class="details-overlay details-reset">
                <summary class="Header-link" aria-label="View profile and more"
                    data-ga-click="Header, show menu, icon:avatar">
                    
                    <img alt="" class="avatar" src="https://pinkguy233.github.io/images/avatar.png" height="20" width="20">
                    
                </summary>
            </details>
        </div>
    </header>
</div>

<div id="start-of-content" class="show-on-focus"></div>
<div id="js-flash-container">
</div>

  
<div class="application-main " data-commit-hovercards-enabled="">
    <div itemscope="" itemtype="http://schema.org/SoftwareSourceCode" class="">
        <main id="js-repo-pjax-container" data-pjax-container="">
            <div class="pagehead repohead instapaper_ignore readability-menu experiment-repo-nav pt-0 pt-lg-4 ">
                <div class="repohead-details-container clearfix container-lg p-responsive d-none d-lg-block">
                    <div class="mb-3 d-flex">
                        <h1 class="public css-truncate float-none flex-auto width-fit pl-0">
                            <a class="avatar mr-1" href="https://pinkguy233.github.io/about/">
                            
                                <img
                                    src="https://pinkguy233.github.io/images/avatar.png" width="26" height="26">
                            
                            </a>
                            <span class="author"><a
                                    href="https://pinkguy233.github.io/">PinkGuy</a></span>
                            <span class="path-divider">/</span>
                            <strong itemprop="name" class="css-truncate-target" style="max-width: 410px"><a
                                    href="https://pinkguy233.github.io/post/%E5%BA%8F%E5%88%97/">序列</a></strong>

                            <div class="d-block text-small text-gray">
                                Created <time-ago datetime="2019-11-26" class="no-wrap"
                                    title="Created at 2019/11/26">
                                    2019-11-26</time-ago>
                                <span class="file-info-divider"></span>
                                Modifyd <time-ago datetime="2019-11-26" class="no-wrap"
                                    title="Modifyd at 2019/11/26">
                                    2019-11-26</time-ago>
                            </div>
                        </h1>
                    </div>
                </div>




            </div>
            <div class="container-lg clearfix new-discussion-timeline experiment-repo-nav  p-responsive">
                <div class="repository-content ">
                    <div class="Box mt-3 position-relative">
                        <div class="Box-header py-2 d-flex flex-column flex-shrink-0 flex-md-row flex-md-items-center">
                            <div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0">
                                777 Words
                                
                            </div>
                        </div>

                        <div id="readme" class="Box-body readme blob instapaper_body js-code-block-container">
                            <article class="markdown-body entry-content p-3 p-md-6" itemprop="text">

<p>序列：用于生产唯一，连续的对象（模拟自增）</p>

<ul>
<li><p>本质就是内存中的数组</p>

<pre><code class="language-sql">-- 数组长度20
[1,2,3,4,..,20][21,22,..,40]
</code></pre></li>
</ul>

<h4 id="创建序列">创建序列</h4>

<pre><code>-- create sequence 序列名
create sequence myseq;
</code></pre>

<p>创建序列时，会自带默认值；</p>

<pre><code class="language-sql">start with 10		-- 起始值 指定序号从#开始;
increment by 10	--步长 指定序号之间的间隔为#;
maxvalue  200	--最大值 表示序列最大值为#；
minvalue  10	--最小值 表示序列最小值为#；
cycle | nocycle	-- (默认不循环) 达到最大值之后是否生成下一个值;
cache n | no cache -- (默认no cache)
</code></pre>

<pre><code class="language-sql">-- 查询刚刚创建的序列
 select * from user_sequences;
 
-- 创建的序列
SEQUENCE_NAME                   MIN_VALUE  MAX_VALUE INCREMENT_BY C O CACHE_SIZE LAST_NUMBER
------------------------------ ---------- ---------- ------------ - - ---------- -----------
MYSEQ                                   1 1.0000E+27            1 N N         20           1
</code></pre>

<p>​</p>

<h4 id="使用序列">使用序列</h4>

<p>序列有2个属性</p>

<ul>
<li>nextval（下一个值）</li>
<li>currval (当前值)</li>
</ul>

<p>通过nextval得到currval；（起始位置不存在）</p>

<h5 id="使用-模拟自增">使用——模拟自增</h5>

<pre><code class="language-sql">-- 序列可以当作伪列
select myseq.nextval,myseq.currval,empno,ename from emp;

-- nex找到 curr打印
   NEXTVAL    CURRVAL      EMPNO ENAME
---------- ---------- ---------- ----------
         1          1       7369 SMITH
         2          2       7499 ALLEN
         3          3       7521 WARD
         4          4       7566 JONES
         5          5       7654 MARTIN
         6          6       7698 BLAKE
         7          7       7782 CLARK
         8          8       7788 SCOTT
         9          9       7839 KING
        10         10       7844 TURNER
        11         11       7876 ADAMS

   NEXTVAL    CURRVAL      EMPNO ENAME
---------- ---------- ---------- ----------
        12         12       7900 JAMES
        13         13       7902 FORD
        14         14       7934 MILLER
</code></pre>

<p>再使用刚才的语句执行一次</p>

<pre><code class="language-sql">-- 结果
   NEXTVAL    CURRVAL      EMPNO ENAME
---------- ---------- ---------- ----------
        15         15       7369 SMITH
        16         16       7499 ALLEN
        17         17       7521 WARD
        18         18       7566 JONES
        19         19       7654 MARTIN
        20         20       7698 BLAKE
        21         21       7782 CLARK
        22         22       7788 SCOTT
        23         23       7839 KING
        24         24       7844 TURNER
        25         25       7876 ADAMS

   NEXTVAL    CURRVAL      EMPNO ENAME
---------- ---------- ---------- ----------
        26         26       7900 JAMES
        27         27       7902 FORD
        28         28       7934 MILLE
</code></pre>

<p>序列会跟着上一次查询的结果继续&ndash;不会重来；</p>

<p>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-分割线&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;</p>

<h5 id="循环序列">循环序列</h5>

<ul>
<li><p>创建序列 并 伪表查看 emp</p>

<pre><code>create sequence myseq3
increment by 2	
start with 1	
maxvalue  9	
minvalue  1	
cycle 
cache 3;
</code></pre></li>
</ul>

<p>1，3，5，7，9循环。。因为设置了2个步长，和允许循环</p>

<pre><code>select myseq3.nextval,ename from emp;

   NEXTVAL ENAME
---------- ----------
         1 SMITH
         3 ALLEN
         5 WARD
         7 JONES
         9 MARTIN
         1 BLAKE
         3 CLARK
         5 SCOTT
         7 KING
         9 TURNER
         1 ADAMS

   NEXTVAL ENAME
---------- ----------
         3 JAMES
         5 FORD
         7 MILLER
</code></pre>

<ul>
<li>循环主键不能用于 主见/唯一约束 赋值 （）</li>
</ul>
</article>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>

<div class="utterances"></div>
<script src="https://utteranc.es/client.js"
        repo="example/example.github.io"
        issue-term="title"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>



  <div class="footer container-lg width-full p-responsive" role="contentinfo">
    <div
        class="position-relative d-flex flex-row-reverse flex-lg-row flex-wrap flex-lg-nowrap flex-justify-center flex-lg-justify-between pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light ">
        <ul
            class="list-style-none d-flex flex-wrap col-12 col-lg-5 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
            <li class="mr-3 mr-lg-0">© 2019. Theme by <a href="https://github.com/MeiK2333/github-style"><span>github-style</span></a></li>
        </ul>

        <a aria-label="Homepage" title="PinkGuy主页" class="footer-octicon d-none d-lg-block mx-lg-4"
            href="https://pinkguy233.github.io/">
            <svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
                </path>
            </svg>
        </a>
        <ul
            class="list-style-none d-flex flex-wrap col-12 col-lg-5 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
        </ul>
    </div>
    <div class="d-flex flex-justify-center pb-6">
        <span class="f6 text-gray-light"></span>
    </div>
</div>

<script crossorigin="anonymous"
    type="application/javascript" src="https://pinkguy233.github.io/js/frameworks.js"></script>

<script crossorigin="anonymous" async="async"
    type="application/javascript" src="https://pinkguy233.github.io/js/github-bootstrap.js"></script>
<script>
    let classs = ['pinned-item-desc', 'text-gray', 'text-small', 'd-block', 'mt-2', 'mb-3'];
    const pinned_posts = document.getElementsByName('pinned-post');
    for (let i = 0; i < pinned_posts.length; i++) {
        for (let j = 0; j < classs.length; j++) {
            const ps = pinned_posts[i].getElementsByTagName('p');
            for (let k = 0; k < ps.length; k++) {
                ps[k].classList.add(classs[j]);
            }
        }
    }
    classs = [ 'd-inline-block', 'text-gray', 'mb-2', 'pr-4'];
    const posts_posts = document.getElementsByName('posts-post');
    for (let i = 0; i < posts_posts.length; i++) {
        for (let j = 0; j < classs.length; j++) {
            const ps = posts_posts[i].getElementsByTagName('p');
            for (let k = 0; k < ps.length; k++) {
                ps[k].classList.add(classs[j]);
            }
        }
    }
</script>
</body>

</html>